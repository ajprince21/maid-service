{% extends "maid/base.html" %}
{% load static %}
{% block title %}
	maidservices.com
{% endblock %}

{% block javascripts %}
	{{block.super}}
	 <script src="{% static 'maid/update_profile.js' %}" type="text/javascript"></script> 	
{% endblock %}

{% block content%}
	<div >
		<form class="form-inline my-2 my-lg-0">
			<!-- <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" name="search" > -->
			{{form}}
			<button class="btn btn-secondary" type="submit">Search</button>
		</form>
	</div>

<!-- 	<div class="update_form">
		
	</div> -->

	<table class="table table-hover">
		<thead>
			<tr>
				<th scope="col">MAID USERNAME</th>
				<th scope="col">MAID NAME</th>
				<th scope="col">MOBILE NUMBER </th>
				<th scope="col">ADDRESS</th>
				<th scope="col">WORK TYPE</th>
				{% if request.user.is_superuser %}
					<th scope="col">Edit</th>
					<th scope="col">Delete</th>
				{%else%}
					<th scope="col">Rating</th>
				{% endif %}
			</tr>
		</thead>
		{% for maid in page_obj %}
			<tbody>
				<tr>
					<td style="text-transform: uppercase; color: #761803 ;font-weight: bold ;">{{maid.user}}</td>
					<td style="text-transform: capitalize;">{{maid.user.first_name}} {{maid.user.last_name}}</td>
					{% if user.is_authenticated %}	
						<td>{{maid.mobile_number}} </td>
					{% else %}
						<td>Login to view..</td>
					{% endif %}
					<td style="text-transform: capitalize;">{{maid.address}}</td>
					{% if maid.work_type %}
						<td style="text-transform: capitalize;">{{maid.work_type}}</td>
					{%else%}
						<td style="color : orange;">Not available</td>
					{% endif%}
					{% if request.user.is_superuser %}
					<td><button type="button" current_maid_id="{{ maid.user.id }}" class="button_edit btn-info btn-lg" data-toggle="modal" data-target="#edit_profile_modal">Edit</button></td>

					<td> <a href="{% url 'maid:delete_maid' maid.user.id %}" onclick="return confirm('Are you sure you want to delete?');" class="btn btn-danger">Delete</a></td>
					{%else%}
						<td style="color : orange;">****</td>
					{% endif %}
				</tr>
			</tbody>
		{% endfor %}
	</table>
	{% if page_obj %}
		<div class="pagination">
			<span class="step-links">
				{% if page_obj.has_previous %}
				<a href="?page=1">&laquo; first</a>
				<a href="?page={{ page_obj.previous_page_number }}">previous</a>
				{% endif %}

				<span class="current">
					Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
				</span>

				{% if page_obj.has_next %}
				<a href="?page={{ page_obj.next_page_number }}">next</a>
				<a href="?page={{ page_obj.paginator.num_pages }}">last &raquo;</a>
				{% endif %}
			</span>
		</div>
	{% else %}
		<p style="color : brown; font-style: italic;"> No Results Found !!</p>
	{% endif %}	

	<div class="modal fade" id="edit_profile_modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Update Profile</h5>
					<button type="button" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body" id="card-body">
					
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
					<button type="button" id="submit" class="btn btn-primary">Save changes</button>
				</div>
			</div>
		</div>
	</div>
{% endblock %}


